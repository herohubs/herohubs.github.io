---
import { getSinglePage } from '@/lib/contentParser.astro';
import { sortByDate } from '@/lib/utils/sortFunctions';
import Post from '@/components/Post.astro';
import type { HomeData } from '@/interfaces';
import { loadLocalizedConfig } from '@/lib/utils/lang';
const { className, lang } = Astro.props;
const posts = await getSinglePage('posts', lang);
const sortPostByDate = sortByDate(posts);
const home: HomeData = await loadLocalizedConfig(lang, 'home');
---

<section class={className} id="blog">
  <div class="rounded-4xl p-12 lg:p-9 h-full border border-border bg-body/85">
    <p class="my-4">
      <ul class="space-y-6">
        <li class="border-border">
          <h6 class="text-center">{home.blog.subtitle}</h6>
          <p class="text-muted-foreground text-center my-4">
            {home.blog.text}
          </p>
        </li>
      </ul>
      <div class="w-full flex items-center justify-center">
        <div class="pt-6">
          <div class="container mx-auto px-4 overflow-hidden">
            <div class="max-w-6xl mx-auto flex">
              <div class="flex flex-wrap gap-x-4 gap-y-4 justify-center">
                {
                  sortPostByDate
                    .slice(0, 3)
                    .map((post) => <Post className="flex-shrink-0 w-90 h-100" post={post} lang={lang} />)
                }
              </div>
            </div>
          </div>
        </div>
      </div>
    </p>
  </div>
</section>
