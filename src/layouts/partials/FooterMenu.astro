---
import type { INavigationLink } from '@/interfaces';
import { loadLocalizedConfig } from '@/lib/utils/lang';

const { menu, showLangSwitcher, lang } = Astro.props as {
  menu: INavigationLink[];
  showLangSwitcher?: boolean;
  lang?: string;
};
const currentPath = Astro.url.pathname;

const i18n: any = await loadLocalizedConfig(lang, 'i18n');
---

<div>
  <ul class="space-y-2 text-center">
    {
      menu.map((m) => (
        <li>
          <a href={m.url} class="hover:text-primary transition-colors text-sm">
            {m.name}
          </a>
        </li>
      ))
    }
  </ul>
  {
    showLangSwitcher && (
      <div class="mt-4 text-center">
        <span class="text-sm text-gray-600 mr-2">{i18n.langSwitcher.label}:</span>
        {lang !== 'en' && (
          <a href={currentPath.replace(/^\/it/, '/en')} class="text-primary hover:underline mx-1">
            {i18n.langSwitcher.en}
          </a>
        )}
        {lang !== 'it' && (
          <a href={currentPath.replace(/^\/en/, '/it')} class="text-primary hover:underline mx-1">
            {i18n.langSwitcher.it}
          </a>
        )}
      </div>
    )
  }
</div>
